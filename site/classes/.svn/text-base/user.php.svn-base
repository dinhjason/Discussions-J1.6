<?php


// Check to ensure this file is included in Joomla!
defined('_JEXEC') or die('Restricted Access');



/**
 * User class
 *
 */
class CUser extends JObject {


    var $_id = 0;

    var $_posts = 0;

    var $_avatarStatus = 0;

    var $_avatar = null;

    var $_signatureStatus = 0;

    var $_signature = "";

    var $_title = "";

    var $_zipcode = "";

    var $_city = "";

    var $_country = "";

	/* 
	* user is a forum moderator and will see moderator functions 
	*/
    var $_moderator = 0;

	/* 
	* user is moderated. A moderator has to approve this users posts
	*/
    var $_moderated = 0;

	/* 
	* user is in rookie mode. < x posts a moderator has to approve this users posts
	*/
    var $_rookie = 0;

	/* 
	* user is trusted. Maybe known by the site owner. This users posts will bypass rookie mode
	*/
    var $_trusted = 0;



	/**
	* Constructor
	*
	* @access 	protected
	*/
	function __construct( $userid = 0) {
	
		$this->_id = $userid;

        $db = JFactory::getDBO();

		$query = "SELECT * FROM ".$db->nameQuote('#__discussions_users')." WHERE id='".$userid."'";
        $db->setQuery($query);

        $_user = $db->loadAssoc();

        $this->_posts      = $_user['posts'];
        $this->_avatar     = $_user['avatar'];
        $this->_signature  = $_user['signature'];
        $this->_title      = $_user['title'];
        $this->_zipcode    = $_user['zipcode'];
        $this->_city       = $_user['city'];
        $this->_country    = $_user['country'];
        $this->_moderator  = $_user['moderator'];
        $this->_moderated  = $_user['moderated'];
        $this->_rookie     = $_user['rookie'];
        $this->_trusted    = $_user['trusted'];

	}


	function setId( $id) {
		$this->_id = $id;
	}

	function setPosts( $posts) {
		$this->_posts = $posts;
	}

	function setAvatarStatus( $avatarStatus) {
		$this->_avatarStatus = $avatarStatus;
	}

	function setAvatar( $avatar) {
		$this->_avatar = $avatar;
	}

	function setSignatureStatus( $signatureStatus) {
		$this->_signatureStatus = $signatureStatus;
	}

	function setSignature( $signature) {
		$this->_signature = $signature;
	}

	function setTitle( $title) {
		$this->_title = $title;
	}
	
	function setZipcode( $zipcode) {
		$this->_zipcode = $zipcode;
	}
	
	function setCity( $city) {
		$this->_city = $city;
	}
	
	function setCountry( $country) {
		$this->_country = $country;
	}

	function setModerator( $moderator) {
		$this->_moderator = $moderator;
		
		$db = JFactory::getDBO();
		$sql = "UPDATE ".$db->nameQuote( '#__discussions_users')." SET" . 
					" moderator = " . $db->Quote( $this->_moderator) . 
					" WHERE id = '".$this->_id."'";
		$db->setQuery( $sql);
		$result = $db->query();		
	}

	function setModerated( $moderated) {
		$this->_moderated = $moderated;

		$db = JFactory::getDBO();
		$sql = "UPDATE ".$db->nameQuote( '#__discussions_users')." SET" . 
					" moderated = " . $db->Quote( $this->_moderated) . 
					" WHERE id = '".$this->_id."'";
		$db->setQuery( $sql);
		$result = $db->query();		
	}

	function setRookie( $rookie) {
		$this->_rookie = $rookie;

		$db = JFactory::getDBO();
		$sql = "UPDATE ".$db->nameQuote( '#__discussions_users')." SET" . 
					" rookie = " . $db->Quote( $this->_rookie) . 
					" WHERE id = '".$this->_id."'";
		$db->setQuery( $sql);
		$result = $db->query();		
	}

	function setTrusted( $trusted) {
		$this->_trusted = $trusted;

		$db = JFactory::getDBO();
		$sql = "UPDATE ".$db->nameQuote( '#__discussions_users')." SET" . 
					" trusted = " . $db->Quote( $this->_trusted) . 
					" WHERE id = '".$this->_id."'";
		$db->setQuery( $sql);
		$result = $db->query();		
	}



	function getId() {
		return $this->_id;
	}

	function getPosts() {
		return $this->_posts;
	}

	function getAvatarStatus() {
		return $this->_avatarStatus;
	}

	function getAvatar() {
		return $this->_avatar;
	}

	function getSignatureStatus() {
		return $this->_signatureStatus;
	}
    
	function getSignature() {
		return $this->_signature;
	}

	function getTitle() {
		return $this->_title;
	}

	function getZipcode() {
		return $this->_zipcode;
	}
	function getCity() {
		return $this->_city;
	}
	function getCountry() {
		return $this->_country;
	}



	function isModerator() {
		return $this->_moderator;
	}

	function isModerated() {
		return $this->_moderated;
	}

	function isRookie() {
		return $this->_rookie;
	}

	function isTrusted() {
		return $this->_trusted;
	}


}


